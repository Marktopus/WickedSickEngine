# pragma once

#include "MetaPrecompiled.h"

class Var;


#define MAX_CSTRING 256

#define STRINGIFY(x) #x

#define CONCATENATE(x, y) x##y

static std::vector<Var*> META_ARGS;

#define TypeFromNull(Type) ((Type*)(nullptr))
#define MemberOffset(var, type) (unsigned)(&TypeFromNull( type )->var)

#define RegisterVirtual\
  public: virtual const Metadata* GetMetadata() const \
{ return MetaSingleton<decltype(*this)>::GetMetadata(); }



//put in cpp for reflection of a type in the header, pass type name
// RegisterType
// {
//   ...
// }

#define RegisterEnum(Namespace, yourenum, lastelement)                                              \
  Metadata MetaSingleton<Namespace::yourenum>::metadata_( STRINGIFY(yourenum),                      \
                                                          STRINGIFY(Namespace),                     \
                                                          sizeof(Namespace::yourenum),              \
                                                          ByValue,                                  \
                                                          true);                                    \
  MetaSingleton<Namespace::yourenum> Namespace##yourenum##MetaSingleton;                            \
  template <>                                                                                       \
  void MetaSingleton<Namespace::yourenum>::RegisterTypeData(void)                                   \
  {                                                                                                 \
    MetaSingleton<Namespace::yourenum>::Get()->GetEnumConstants().resize(Namespace::lastelement+1); \
    typedef Namespace::yourenum __this;

#define DEFINE_SCOPED_ENUM(Namespace, yourclass, yourenum, lastelement)                                                   \
  Metadata MetaSingleton<Namespace::yourclass::yourenum>::metadata_(STRINGIFY(yourclass##yourenum),                       \
                                                                    STRINGIFY(Namespace),                                 \
                                                                    sizeof(Namespace::yourclass::yourenum),               \
                                                                    ByValue,                                              \
                                                                    true);                                                \
  MetaSingleton<Namespace::yourclass::yourenum> Namespace##yourclass##yourenum##MetaSingleton;                            \
  template <> void                                                                                                        \
  MetaSingleton<Namespace::yourclass::yourenum>::RegisterTypeData(void)                                                   \
  {                                                                                                                       \
    MetaSingleton<Namespace::yourclass::yourenum>::Get()->GetEnumConstants().resize(Namespace::yourclass::lastelement+1); \
    typedef Namespace::yourclass::yourenum __this;

#define MetaDef static void RegisterTypeData(void); \
                       Metadata* GetMetatype(void); 


#define MetaDefVirtual static void RegisterTypeData(void); \
                               virtual Metadata* GetMetatype(void); 


//#define DEFINE_TEMPLATED_EXTERNAL(Namespace, metatype, internalType) Metadata MetaSingleton<Namespace::metatype<internalType> >::metadata_(#metatype, #Namespace, sizeof(Namespace::metatype<internalType>), false); \
//  MetaSingleton<Namespace::metatype<internalType> > Namespace##metatype##MetaSingleton; \
//  template <> void MetaSingleton<Namespace::metatype<internalType> >::RegisterTypeData(void)

#define RegisterExternalType(Namespace, metatype)                                          \
  Metadata MetaSingleton<Namespace::metatype>::metadata_(#metatype,                   \
                                                         #Namespace,                  \
                                                         sizeof(Namespace::metatype), \
                                                         ByReference,                 \
                                                         false);                      \
  MetaSingleton<Namespace::metatype> Namespace##metatype##MetaSingleton;              \
  template <> void MetaSingleton<Namespace::metatype>::RegisterTypeData(void)         \
  {                                                                                   \
    typedef Namespace::metatype __this;

#define DEFINE_PRIMITIVE(metatype) Metadata MetaSingleton<metatype>::metadata_(#metatype, sizeof(metatype), ByValue, true);   \
  MetaSingleton<metatype> metatype##MetaSingleton; \
  template <> void MetaSingleton<metatype>::RegisterTypeData(void){}

#define FindType(metatype) (MetaSingleton<metatype>::Get())

#define DEFINE_CONVERSIONS void MetaManager::DefineConversions()

#define META(object) MetaSingleton<decltype(object)>::Get()

#define CONVERTS(from, to) FindType(from)->AddConversion(FindType(to)); FindType(to)->AddConversion(FindType(from));

#define FIND_TYPE(type) (MetaSingleton<typename SimplifyType(type)>::Get())

//used to define members in a class,
//
// RegisterType
// {
//   RegisterMember(member, baseType)
// }

#define RegisterEnumMember(enumeration) \
  MetaSingleton<__this>::Get()->GetEnumConstants()[__this::enumeration] = STRINGIFY(enumeration)

#define REGISTER_GLOBAL_FUNCTION(functionName, function) MetaSingleton<VoidType>::Get()->AddMemberFunction(Function(function), functionName);

#define RegisterMethod(functionName, function) \
  MetaSingleton< __this >::Get()->AddMemberFunction(Function(function), functionName)

#define DECLARE_DERIVED(Namespace, className, baseType)                                                                   \
  MetaSingleton<Namespace::baseType>::Derived<Namespace::className> Namespace##className##baseType;                       \
  Metadata* MetaSingleton<Namespace::baseType>::Derived<Namespace::className>::metadata_ = FindType(Namespace::className)

#define REGISTER_DERIVED(classname) FindType(__this)->AddDerived(MetaSingleton<__this>::Derived<classname>::Get())

#define RegisterMember(member) MetaSingleton< __this >::Get()->AddMember(Member(#member, \
                                                                                FIND_TYPE(__this), \
                                                                                FIND_TYPE(decltype(__this::member)), \
                                                                                MemberOffset(__this::member, __this), \
                                                                                IndirectionCount<decltype(__this::member)>::value))


#define EXPAND(X) X

#define F(x, ...) X = x and VA_ARGS = __VA_ARGS__
#define G(...) EXPAND(F(__VA_ARGS__))

#define PP_NARG(...) EXPAND(PP_NARG_(__VA_ARGS__, PP_RSEQ_N()))
#define PP_NARG_(...) EXPAND(PP_ARG_N(__VA_ARGS__))
#define PP_ARG_N(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, N, ...) N
#define PP_RSEQ_N() 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0


#define CALL_MEM_FUN_2( ObjectVariant, funName, returnValue)                                                                                                 META_ARGS.clear();                                                                                                                                                                                                                                                                                                                                                                                                                                           ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);
#define CALL_MEM_FUN_3( ObjectVariant, funName, returnValue, arg1)                                                                                           META_ARGS.clear(); META_ARGS.push_back(&arg1);                                                                                                                                                                                                                                                                                                                                                                                                               ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);
#define CALL_MEM_FUN_4( ObjectVariant, funName, returnValue, arg1, arg2)                                                                                     META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2);                                                                                                                                                                                                                                                                                                                                                                                   ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);
#define CALL_MEM_FUN_5( ObjectVariant, funName, returnValue, arg1, arg2, arg3)                                                                               META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3);                                                                                                                                                                                                                                                                                                                                                       ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);
#define CALL_MEM_FUN_6( ObjectVariant, funName, returnValue, arg1, arg2, arg3, arg4)                                                                         META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4);                                                                                                                                                                                                                                                                                                                           ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);
#define CALL_MEM_FUN_7( ObjectVariant, funName, returnValue, arg1, arg2, arg3, arg4, arg5)                                                                   META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5);                                                                                                                                                                                                                                                                                               ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);
#define CALL_MEM_FUN_8( ObjectVariant, funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6)                                                             META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6);                                                                                                                                                                                                                                                                   ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);
#define CALL_MEM_FUN_9( ObjectVariant, funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7)                                                       META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7);                                                                                                                                                                                                                                       ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);
#define CALL_MEM_FUN_10(ObjectVariant, funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8)                                                 META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8);                                                                                                                                                                                                           ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);
#define CALL_MEM_FUN_11(ObjectVariant, funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9)                                           META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8); META_ARGS.push_back(&arg9);                                                                                                                                                                               ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);
#define CALL_MEM_FUN_12(ObjectVariant, funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10)                                    META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8); META_ARGS.push_back(&arg9); META_ARGS.push_back(&arg10);                                                                                                                                                  ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);
#define CALL_MEM_FUN_13(ObjectVariant, funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11)                             META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8); META_ARGS.push_back(&arg9); META_ARGS.push_back(&arg10); META_ARGS.push_back(&arg11);                                                                                                                     ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);
#define CALL_MEM_FUN_14(ObjectVariant, funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11, arg12)                      META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8); META_ARGS.push_back(&arg9); META_ARGS.push_back(&arg10); META_ARGS.push_back(&arg11); META_ARGS.push_back(&arg12);                                                                                        ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);
#define CALL_MEM_FUN_15(ObjectVariant, funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11, arg12, arg13)               META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8); META_ARGS.push_back(&arg9); META_ARGS.push_back(&arg10); META_ARGS.push_back(&arg11); META_ARGS.push_back(&arg12); META_ARGS.push_back(&arg13);                                                           ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);
#define CALL_MEM_FUN_16(ObjectVariant, funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11, arg12, arg13, arg14)        META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8); META_ARGS.push_back(&arg9); META_ARGS.push_back(&arg10); META_ARGS.push_back(&arg11); META_ARGS.push_back(&arg12); META_ARGS.push_back(&arg13); META_ARGS.push_back(&arg14);                              ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);
#define CALL_MEM_FUN_17(ObjectVariant, funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11, arg12, arg13, arg14, arg15) META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8); META_ARGS.push_back(&arg9); META_ARGS.push_back(&arg10); META_ARGS.push_back(&arg11); META_ARGS.push_back(&arg12); META_ARGS.push_back(&arg13); META_ARGS.push_back(&arg14); META_ARGS.push_back(&arg15); ObjectVariant.GetMetadata()->GetMethods()[funName](&ObjectVariant, &returnValue, META_ARGS);


#define CALL_MEM_FUN_(N) CALL_MEM_FUN_##N
#define CALL_MEM_FUN_EVAL(N) CALL_MEM_FUN_(N)
#define CALL_MEM_FUN(...) EXPAND(CALL_MEM_FUN_EVAL(EXPAND(PP_NARG(__VA_ARGS__)))(__VA_ARGS__))


#define DEFINE_TEMPLATED_EXTERNAL_2( Namespace, name, type0)                                    Metadata MetaSingleton<Namespace::name<type0>                                     >::metadata_(#name, #Namespace, sizeof(Namespace::name<type0>                                    ), ByReference, false); MetaSingleton<Namespace::name<type0>                                    > Namespace##name##Metasingleton##type0;                                    template <> void MetaSingleton<Namespace::name<type0>                                     >::RegisterTypeData(void)
#define DEFINE_TEMPLATED_EXTERNAL_3( Namespace, name, type0, type1)                             Metadata MetaSingleton<Namespace::name<type0, type1>                              >::metadata_(#name, #Namespace, sizeof(Namespace::name<type0, type1>                             ), ByReference, false); MetaSingleton<Namespace::name<type0, type1>                             > Namespace##name##Metasingleton##type0##type1;                             template <> void MetaSingleton<Namespace::name<type0, type1>                              >::RegisterTypeData(void)
#define DEFINE_TEMPLATED_EXTERNAL_4( Namespace, name, type0, type1, type2)                      Metadata MetaSingleton<Namespace::name<type0, type1, type2>                       >::metadata_(#name, #Namespace, sizeof(Namespace::name<type0, type1, type2>                      ), ByReference, false); MetaSingleton<Namespace::name<type0, type1, type2>                      > Namespace##name##Metasingleton##type0##type1##type2;                      template <> void MetaSingleton<Namespace::name<type0, type1, type2>                       >::RegisterTypeData(void)
#define DEFINE_TEMPLATED_EXTERNAL_5( Namespace, name, type0, type1, type2, type3)               Metadata MetaSingleton<Namespace::name<type0, type1, type2, type3>                >::metadata_(#name, #Namespace, sizeof(Namespace::name<type0, type1, type2, type3>               ), ByReference, false); MetaSingleton<Namespace::name<type0, type1, type2, type3>               > Namespace##name##Metasingleton##type0##type1##type2##type3;               template <> void MetaSingleton<Namespace::name<type0, type1, type2, type3>                >::RegisterTypeData(void)
#define DEFINE_TEMPLATED_EXTERNAL_6( Namespace, name, type0, type1, type2, type3, type4)        Metadata MetaSingleton<Namespace::name<type0, type1, type2, type3, type4>         >::metadata_(#name, #Namespace, sizeof(Namespace::name<type0, type1, type2, type3, type4>        ), ByReference, false); MetaSingleton<Namespace::name<type0, type1, type2, type3, type4>        > Namespace##name##Metasingleton##type0##type1##type2##type3##type4;        template <> void MetaSingleton<Namespace::name<type0, type1, type2, type3, type4>         >::RegisterTypeData(void)
#define DEFINE_TEMPLATED_EXTERNAL_7( Namespace, name, type0, type1, type2, type3, type4, type5) Metadata MetaSingleton<Namespace::name<type0, type1, type2, type3, type4, type5>  >::metadata_(#name, #Namespace, sizeof(Namespace::name<type0, type1, type2, type3, type4, type5> ), ByReference, false); MetaSingleton<Namespace::name<type0, type1, type2, type3, type4, type5> > Namespace##name##Metasingleton##type0##type1##type2##type3##type4##type5; template <> void MetaSingleton<Namespace::name<type0, type1, type2, type3, type4, type5>  >::RegisterTypeData(void)
#define DEFINE_TEMPLATED_EXTERNAL_(N) DEFINE_TEMPLATED_EXTERNAL_##N
#define DEFINE_TEMPLATED_EXTERNAL_EVAL(N) DEFINE_TEMPLATED_EXTERNAL_(N)
#define DEFINE_TEMPLATED_EXTERNAL(...) EXPAND(DEFINE_TEMPLATED_EXTERNAL_EVAL(EXPAND(PP_NARG(__VA_ARGS__)))(__VA_ARGS__))


#define DEFINE_TEMPLATED_EXTERNAL_NAMESPACES_3(  Namespace, name, namespace0, type0)                                                                                                 Metadata MetaSingleton<Namespace::name<namespace0::type0>                                                                                                 >::metadata_(STRINGIFY(CONCATENATE(name, type0)),                                    #Namespace, sizeof(Namespace::name<namespace0::type0>                                                                                                ), ByReference, false); MetaSingleton<Namespace::name<namespace0::type0>                                                                                                > Namespace##name##type0##Metasingleton;                                    template <> void MetaSingleton<Namespace::name<namespace0::type0>                                                                                                >::RegisterTypeData(void)
#define DEFINE_TEMPLATED_EXTERNAL_NAMESPACES_5(  Namespace, name, namespace0, type0, namespace1, type1)                                                                              Metadata MetaSingleton<Namespace::name<namespace0::type0, namespace1::type1>                                                                              >::metadata_(STRINGIFY(CONCATENATE(name, type0##type1)),                             #Namespace, sizeof(Namespace::name<namespace0::type0, namespace1::type1>                                                                             ), ByReference, false); MetaSingleton<Namespace::name<namespace0::type0, namespace1::type1>                                                                             > Namespace##name##type0##type1##Metasingleton;                             template <> void MetaSingleton<Namespace::name<namespace0::type0, namespace1::type1>                                                                             >::RegisterTypeData(void)
#define DEFINE_TEMPLATED_EXTERNAL_NAMESPACES_7(  Namespace, name, namespace0, type0, namespace1, type1, namespace2, type2)                                                           Metadata MetaSingleton<Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2>                                                           >::metadata_(STRINGIFY(CONCATENATE(name, type0##type1##type2)),                      #Namespace, sizeof(Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2>                                                          ), ByReference, false); MetaSingleton<Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2>                                                          > Namespace##name##type0##type1##type2##Metasingleton;                      template <> void MetaSingleton<Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2>                                                          >::RegisterTypeData(void)
#define DEFINE_TEMPLATED_EXTERNAL_NAMESPACES_9(  Namespace, name, namespace0, type0, namespace1, type1, namespace2, type2, namespace3, type3)                                        Metadata MetaSingleton<Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2, namespace3::type3>                                        >::metadata_(STRINGIFY(CONCATENATE(name, type0##type1##type2##type3)),               #Namespace, sizeof(Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2, namespace3::type3>                                       ), ByReference, false); MetaSingleton<Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2, namespace3::type3>                                       > Namespace##name##type0##type1##type2##type3##Metasingleton;               template <> void MetaSingleton<Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2, namespace3::type3>                                       >::RegisterTypeData(void)
#define DEFINE_TEMPLATED_EXTERNAL_NAMESPACES_11( Namespace, name, namespace0, type0, namespace1, type1, namespace2, type2, namespace3, type3, namespace4, type4)                     Metadata MetaSingleton<Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2, namespace3::type3, namespace4::type4>                     >::metadata_(STRINGIFY(CONCATENATE(name, type0##type1##type2##type3##type4)),        #Namespace, sizeof(Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2, namespace3::type3, namespace4::type4>                    ), ByReference, false); MetaSingleton<Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2, namespace3::type3, namespace4::type4>                    > Namespace##name##type0##type1##type2##type3##type4##Metasingleton;        template <> void MetaSingleton<Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2, namespace3::type3, namespace4::type4>                    >::RegisterTypeData(void)
#define DEFINE_TEMPLATED_EXTERNAL_NAMESPACES_13( Namespace, name, namespace0, type0, namespace1, type1, namespace2, type2, namespace3, type3, namespace4, type4, namespace5, type5)  Metadata MetaSingleton<Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2, namespace3::type3, namespace4::type4, namespace5::type5>  >::metadata_(STRINGIFY(CONCATENATE(name, type0##type1##type2##type3##type4##type5)), #Namespace, sizeof(Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2, namespace3::type3, namespace4::type4, namespace5::type5> ), ByReference, false); MetaSingleton<Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2, namespace3::type3, namespace4::type4, namespace5::type5> > Namespace##name##type0##type1##type2##type3##type4##type5##Metasingleton; template <> void MetaSingleton<Namespace::name<namespace0::type0, namespace1::type1, namespace2::type2, namespace3::type3, namespace4::type4, namespace5::type5> >::RegisterTypeData(void)
#define DEFINE_TEMPLATED_EXTERNAL_NAMESPACES_(N) DEFINE_TEMPLATED_EXTERNAL_NAMESPACES_##N
#define DEFINE_TEMPLATED_EXTERNAL_NAMESPACES_EVAL(N) DEFINE_TEMPLATED_EXTERNAL_NAMESPACES_(N)
#define DEFINE_TEMPLATED_EXTERNAL_NAMESPACES(...) EXPAND(DEFINE_TEMPLATED_EXTERNAL_NAMESPACES_EVAL(EXPAND(PP_NARG(__VA_ARGS__)))(__VA_ARGS__))

#define DEFINE_STL_CONTAINER_2( Namespace, name, type0)                                    Metadata MetaSingleton<Namespace::name<type0>                                     >::metadata_(#name, #Namespace, sizeof(Namespace::name<type0>                                    ), false); MetaSingleton<Namespace::name<type0>                                    > Namespace##name##Metasingleton; template <> void MetaSingleton<Namespace::name<type0>                                     >::RegisterTypeData(void)
#define DEFINE_STL_CONTAINER_3( Namespace, name, type0, type1)                             Metadata MetaSingleton<Namespace::name<type0, type1>                              >::metadata_(#name, #Namespace, sizeof(Namespace::name<type0, type1>                             ), false); MetaSingleton<Namespace::name<type0, type1>                             > Namespace##name##Metasingleton; template <> void MetaSingleton<Namespace::name<type0, type1>                              >::RegisterTypeData(void)
#define DEFINE_STL_CONTAINER_4( Namespace, name, type0, type1, type2)                      Metadata MetaSingleton<Namespace::name<type0, type1, type2>                       >::metadata_(#name, #Namespace, sizeof(Namespace::name<type0, type1, type2>                      ), false); MetaSingleton<Namespace::name<type0, type1, type2>                      > Namespace##name##Metasingleton; template <> void MetaSingleton<Namespace::name<type0, type1, type2>                       >::RegisterTypeData(void)
#define DEFINE_STL_CONTAINER_5( Namespace, name, type0, type1, type2, type3)               Metadata MetaSingleton<Namespace::name<type0, type1, type2, type3>                >::metadata_(#name, #Namespace, sizeof(Namespace::name<type0, type1, type2, type3>               ), false); MetaSingleton<Namespace::name<type0, type1, type2, type3>               > Namespace##name##Metasingleton; template <> void MetaSingleton<Namespace::name<type0, type1, type2, type3>                >::RegisterTypeData(void)
#define DEFINE_STL_CONTAINER_6( Namespace, name, type0, type1, type2, type3, type4)        Metadata MetaSingleton<Namespace::name<type0, type1, type2, type3, type4>         >::metadata_(#name, #Namespace, sizeof(Namespace::name<type0, type1, type2, type3, type4>        ), false); MetaSingleton<Namespace::name<type0, type1, type2, type3, type4>        > Namespace##name##Metasingleton; template <> void MetaSingleton<Namespace::name<type0, type1, type2, type3, type4>         >::RegisterTypeData(void)
#define DEFINE_STL_CONTAINER_7( Namespace, name, type0, type1, type2, type3, type4, type5) Metadata MetaSingleton<Namespace::name<type0, type1, type2, type3, type4, type5>  >::metadata_(#name, #Namespace, sizeof(Namespace::name<type0, type1, type2, type3, type4, type5> ), false); MetaSingleton<Namespace::name<type0, type1, type2, type3, type4, type5> > Namespace##name##Metasingleton; template <> void MetaSingleton<Namespace::name<type0, type1, type2, type3, type4, type5>  >::RegisterTypeData(void)
#define DEFINE_STL_CONTAINER_(N) DEFINE_STL_CONTAINER_##N
#define DEFINE_STL_CONTAINER_EVAL(N) DEFINE_STL_CONTAINER_(N)
#define DEFINE_STL_CONTAINER(...) EXPAND(DEFINE_STL_CONTAINER_EVAL(EXPAND(PP_NARG(__VA_ARGS__)))(__VA_ARGS__))


#define CONSTRUCT_1( name, returnValue)                                                                                                 { std::vector<Var*> args;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }
#define CONSTRUCT_2( name, returnValue, arg1)                                                                                           { std::vector<Var*> args; Var* arg1Ref = (Var*)alloca(sizeof(Var)); new(arg1Ref) Var(FindType(decltype(arg1)), &arg1); args.push_back(arg1Ref);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }
#define CONSTRUCT_3( name, returnValue, arg1, arg2)                                                                                     { std::vector<Var*> args; Var* arg1Ref = (Var*)alloca(sizeof(Var)); new(arg1Ref) Var(FindType(decltype(arg1)), &arg1); args.push_back(arg1Ref); Var* arg2Ref = (Var*)alloca(sizeof(Var)); new(arg2Ref) Var(FindType(decltype(arg2)), &arg2); args.push_back(arg2Ref);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }
#define CONSTRUCT_4( name, returnValue, arg1, arg2, arg3)                                                                               { std::vector<Var*> args; Var* arg1Ref = (Var*)alloca(sizeof(Var)); new(arg1Ref) Var(FindType(decltype(arg1)), &arg1); args.push_back(arg1Ref); Var* arg2Ref = (Var*)alloca(sizeof(Var)); new(arg2Ref) Var(FindType(decltype(arg2)), &arg2); args.push_back(arg2Ref); Var* arg3Ref = (Var*)alloca(sizeof(Var)); new(arg3Ref) Var(FindType(decltype(arg3)), &arg3); args.push_back(arg3Ref);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }
#define CONSTRUCT_5( name, returnValue, arg1, arg2, arg3, arg4)                                                                         { std::vector<Var*> args; Var* arg1Ref = (Var*)alloca(sizeof(Var)); new(arg1Ref) Var(FindType(decltype(arg1)), &arg1); args.push_back(arg1Ref); Var* arg2Ref = (Var*)alloca(sizeof(Var)); new(arg2Ref) Var(FindType(decltype(arg2)), &arg2); args.push_back(arg2Ref); Var* arg3Ref = (Var*)alloca(sizeof(Var)); new(arg3Ref) Var(FindType(decltype(arg3)), &arg3); args.push_back(arg3Ref); Var* arg4Ref = (Var*)alloca(sizeof(Var)); new(arg4Ref) Var(FindType(decltype(arg4)), &arg4); args.push_back(arg4Ref);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }
#define CONSTRUCT_6( name, returnValue, arg1, arg2, arg3, arg4, arg5)                                                                   { std::vector<Var*> args; Var* arg1Ref = (Var*)alloca(sizeof(Var)); new(arg1Ref) Var(FindType(decltype(arg1)), &arg1); args.push_back(arg1Ref); Var* arg2Ref = (Var*)alloca(sizeof(Var)); new(arg2Ref) Var(FindType(decltype(arg2)), &arg2); args.push_back(arg2Ref); Var* arg3Ref = (Var*)alloca(sizeof(Var)); new(arg3Ref) Var(FindType(decltype(arg3)), &arg3); args.push_back(arg3Ref); Var* arg4Ref = (Var*)alloca(sizeof(Var)); new(arg4Ref) Var(FindType(decltype(arg4)), &arg4); args.push_back(arg4Ref); Var* arg5Ref = (Var*)alloca(sizeof(Var)); new(arg5Ref) Var(FindType(decltype(arg5)), &arg5); args.push_back(arg5Ref);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }
#define CONSTRUCT_7( name, returnValue, arg1, arg2, arg3, arg4, arg5, arg6)                                                             { std::vector<Var*> args; Var* arg1Ref = (Var*)alloca(sizeof(Var)); new(arg1Ref) Var(FindType(decltype(arg1)), &arg1); args.push_back(arg1Ref); Var* arg2Ref = (Var*)alloca(sizeof(Var)); new(arg2Ref) Var(FindType(decltype(arg2)), &arg2); args.push_back(arg2Ref); Var* arg3Ref = (Var*)alloca(sizeof(Var)); new(arg3Ref) Var(FindType(decltype(arg3)), &arg3); args.push_back(arg3Ref); Var* arg4Ref = (Var*)alloca(sizeof(Var)); new(arg4Ref) Var(FindType(decltype(arg4)), &arg4); args.push_back(arg4Ref); Var* arg5Ref = (Var*)alloca(sizeof(Var)); new(arg5Ref) Var(FindType(decltype(arg5)), &arg5); args.push_back(arg5Ref); Var* arg6Ref = (Var*)alloca(sizeof(Var)); new(arg6Ref) Var(FindType(decltype(arg6)), &arg6); args.push_back(arg6Ref);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }
#define CONSTRUCT_8( name, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7)                                                       { std::vector<Var*> args; Var* arg1Ref = (Var*)alloca(sizeof(Var)); new(arg1Ref) Var(FindType(decltype(arg1)), &arg1); args.push_back(arg1Ref); Var* arg2Ref = (Var*)alloca(sizeof(Var)); new(arg2Ref) Var(FindType(decltype(arg2)), &arg2); args.push_back(arg2Ref); Var* arg3Ref = (Var*)alloca(sizeof(Var)); new(arg3Ref) Var(FindType(decltype(arg3)), &arg3); args.push_back(arg3Ref); Var* arg4Ref = (Var*)alloca(sizeof(Var)); new(arg4Ref) Var(FindType(decltype(arg4)), &arg4); args.push_back(arg4Ref); Var* arg5Ref = (Var*)alloca(sizeof(Var)); new(arg5Ref) Var(FindType(decltype(arg5)), &arg5); args.push_back(arg5Ref); Var* arg6Ref = (Var*)alloca(sizeof(Var)); new(arg6Ref) Var(FindType(decltype(arg6)), &arg6); args.push_back(arg6Ref); Var* arg7Ref = (Var*)alloca(sizeof(Var)); new(arg7Ref) Var(FindType(decltype(arg7)), &arg7); args.push_back(arg7Ref);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }
#define CONSTRUCT_9( name, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8)                                                 { std::vector<Var*> args; Var* arg1Ref = (Var*)alloca(sizeof(Var)); new(arg1Ref) Var(FindType(decltype(arg1)), &arg1); args.push_back(arg1Ref); Var* arg2Ref = (Var*)alloca(sizeof(Var)); new(arg2Ref) Var(FindType(decltype(arg2)), &arg2); args.push_back(arg2Ref); Var* arg3Ref = (Var*)alloca(sizeof(Var)); new(arg3Ref) Var(FindType(decltype(arg3)), &arg3); args.push_back(arg3Ref); Var* arg4Ref = (Var*)alloca(sizeof(Var)); new(arg4Ref) Var(FindType(decltype(arg4)), &arg4); args.push_back(arg4Ref); Var* arg5Ref = (Var*)alloca(sizeof(Var)); new(arg5Ref) Var(FindType(decltype(arg5)), &arg5); args.push_back(arg5Ref); Var* arg6Ref = (Var*)alloca(sizeof(Var)); new(arg6Ref) Var(FindType(decltype(arg6)), &arg6); args.push_back(arg6Ref); Var* arg7Ref = (Var*)alloca(sizeof(Var)); new(arg7Ref) Var(FindType(decltype(arg7)), &arg7); args.push_back(arg7Ref); Var* arg8Ref = (Var*)alloca(sizeof(Var)); new(arg8Ref) Var(FindType(decltype(arg8)), &arg8); args.push_back(arg8Ref);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }
#define CONSTRUCT_10(name, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9)                                           { std::vector<Var*> args; Var* arg1Ref = (Var*)alloca(sizeof(Var)); new(arg1Ref) Var(FindType(decltype(arg1)), &arg1); args.push_back(arg1Ref); Var* arg2Ref = (Var*)alloca(sizeof(Var)); new(arg2Ref) Var(FindType(decltype(arg2)), &arg2); args.push_back(arg2Ref); Var* arg3Ref = (Var*)alloca(sizeof(Var)); new(arg3Ref) Var(FindType(decltype(arg3)), &arg3); args.push_back(arg3Ref); Var* arg4Ref = (Var*)alloca(sizeof(Var)); new(arg4Ref) Var(FindType(decltype(arg4)), &arg4); args.push_back(arg4Ref); Var* arg5Ref = (Var*)alloca(sizeof(Var)); new(arg5Ref) Var(FindType(decltype(arg5)), &arg5); args.push_back(arg5Ref); Var* arg6Ref = (Var*)alloca(sizeof(Var)); new(arg6Ref) Var(FindType(decltype(arg6)), &arg6); args.push_back(arg6Ref); Var* arg7Ref = (Var*)alloca(sizeof(Var)); new(arg7Ref) Var(FindType(decltype(arg7)), &arg7); args.push_back(arg7Ref); Var* arg8Ref = (Var*)alloca(sizeof(Var)); new(arg8Ref) Var(FindType(decltype(arg8)), &arg8); args.push_back(arg8Ref); Var* arg9Ref = (Var*)alloca(sizeof(Var)); new(arg9Ref) Var(FindType(decltype(arg9)), &arg9); args.push_back(arg9Ref);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }
#define CONSTRUCT_11(name, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10)                                    { std::vector<Var*> args; Var* arg1Ref = (Var*)alloca(sizeof(Var)); new(arg1Ref) Var(FindType(decltype(arg1)), &arg1); args.push_back(arg1Ref); Var* arg2Ref = (Var*)alloca(sizeof(Var)); new(arg2Ref) Var(FindType(decltype(arg2)), &arg2); args.push_back(arg2Ref); Var* arg3Ref = (Var*)alloca(sizeof(Var)); new(arg3Ref) Var(FindType(decltype(arg3)), &arg3); args.push_back(arg3Ref); Var* arg4Ref = (Var*)alloca(sizeof(Var)); new(arg4Ref) Var(FindType(decltype(arg4)), &arg4); args.push_back(arg4Ref); Var* arg5Ref = (Var*)alloca(sizeof(Var)); new(arg5Ref) Var(FindType(decltype(arg5)), &arg5); args.push_back(arg5Ref); Var* arg6Ref = (Var*)alloca(sizeof(Var)); new(arg6Ref) Var(FindType(decltype(arg6)), &arg6); args.push_back(arg6Ref); Var* arg7Ref = (Var*)alloca(sizeof(Var)); new(arg7Ref) Var(FindType(decltype(arg7)), &arg7); args.push_back(arg7Ref); Var* arg8Ref = (Var*)alloca(sizeof(Var)); new(arg8Ref) Var(FindType(decltype(arg8)), &arg8); args.push_back(arg8Ref); Var* arg9Ref = (Var*)alloca(sizeof(Var)); new(arg9Ref) Var(FindType(decltype(arg9)), &arg9); args.push_back(arg9Ref); Var* arg10Ref = (Var*)alloca(sizeof(Var))new(arg10Ref) Var(FindType(decltype(arg10)), &arg10); args.push_back(arg10Ref);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }
#define CONSTRUCT_12(name, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11)                             { std::vector<Var*> args; Var* arg1Ref = (Var*)alloca(sizeof(Var)); new(arg1Ref) Var(FindType(decltype(arg1)), &arg1); args.push_back(arg1Ref); Var* arg2Ref = (Var*)alloca(sizeof(Var)); new(arg2Ref) Var(FindType(decltype(arg2)), &arg2); args.push_back(arg2Ref); Var* arg3Ref = (Var*)alloca(sizeof(Var)); new(arg3Ref) Var(FindType(decltype(arg3)), &arg3); args.push_back(arg3Ref); Var* arg4Ref = (Var*)alloca(sizeof(Var)); new(arg4Ref) Var(FindType(decltype(arg4)), &arg4); args.push_back(arg4Ref); Var* arg5Ref = (Var*)alloca(sizeof(Var)); new(arg5Ref) Var(FindType(decltype(arg5)), &arg5); args.push_back(arg5Ref); Var* arg6Ref = (Var*)alloca(sizeof(Var)); new(arg6Ref) Var(FindType(decltype(arg6)), &arg6); args.push_back(arg6Ref); Var* arg7Ref = (Var*)alloca(sizeof(Var)); new(arg7Ref) Var(FindType(decltype(arg7)), &arg7); args.push_back(arg7Ref); Var* arg8Ref = (Var*)alloca(sizeof(Var)); new(arg8Ref) Var(FindType(decltype(arg8)), &arg8); args.push_back(arg8Ref); Var* arg9Ref = (Var*)alloca(sizeof(Var)); new(arg9Ref) Var(FindType(decltype(arg9)), &arg9); args.push_back(arg9Ref); Var* arg10Ref = (Var*)alloca(sizeof(Var))new(arg10Ref) Var(FindType(decltype(arg10)), &arg10); args.push_back(arg10Ref); Var* arg11Ref = (Var*)alloca(sizeof(Var))new(arg11Ref) Var(FindType(decltype(arg11)), &arg11); args.push_back(arg11Ref);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }
#define CONSTRUCT_13(name, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11, arg12)                      { std::vector<Var*> args; Var* arg1Ref = (Var*)alloca(sizeof(Var)); new(arg1Ref) Var(FindType(decltype(arg1)), &arg1); args.push_back(arg1Ref); Var* arg2Ref = (Var*)alloca(sizeof(Var)); new(arg2Ref) Var(FindType(decltype(arg2)), &arg2); args.push_back(arg2Ref); Var* arg3Ref = (Var*)alloca(sizeof(Var)); new(arg3Ref) Var(FindType(decltype(arg3)), &arg3); args.push_back(arg3Ref); Var* arg4Ref = (Var*)alloca(sizeof(Var)); new(arg4Ref) Var(FindType(decltype(arg4)), &arg4); args.push_back(arg4Ref); Var* arg5Ref = (Var*)alloca(sizeof(Var)); new(arg5Ref) Var(FindType(decltype(arg5)), &arg5); args.push_back(arg5Ref); Var* arg6Ref = (Var*)alloca(sizeof(Var)); new(arg6Ref) Var(FindType(decltype(arg6)), &arg6); args.push_back(arg6Ref); Var* arg7Ref = (Var*)alloca(sizeof(Var)); new(arg7Ref) Var(FindType(decltype(arg7)), &arg7); args.push_back(arg7Ref); Var* arg8Ref = (Var*)alloca(sizeof(Var)); new(arg8Ref) Var(FindType(decltype(arg8)), &arg8); args.push_back(arg8Ref); Var* arg9Ref = (Var*)alloca(sizeof(Var)); new(arg9Ref) Var(FindType(decltype(arg9)), &arg9); args.push_back(arg9Ref); Var* arg10Ref = (Var*)alloca(sizeof(Var))new(arg10Ref) Var(FindType(decltype(arg10)), &arg10); args.push_back(arg10Ref); Var* arg11Ref = (Var*)alloca(sizeof(Var))new(arg11Ref) Var(FindType(decltype(arg11)), &arg11); args.push_back(arg11Ref); Var* arg12Ref = (Var*)alloca(sizeof(Var))new(arg12Ref) Var(FindType(decltype(arg12)), &arg12); args.push_back(arg12Ref);                                                                                                                                                                                                                                                                                                                                                                                                                                                                   returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }
#define CONSTRUCT_14(name, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11, arg12, arg13)               { std::vector<Var*> args; Var* arg1Ref = (Var*)alloca(sizeof(Var)); new(arg1Ref) Var(FindType(decltype(arg1)), &arg1); args.push_back(arg1Ref); Var* arg2Ref = (Var*)alloca(sizeof(Var)); new(arg2Ref) Var(FindType(decltype(arg2)), &arg2); args.push_back(arg2Ref); Var* arg3Ref = (Var*)alloca(sizeof(Var)); new(arg3Ref) Var(FindType(decltype(arg3)), &arg3); args.push_back(arg3Ref); Var* arg4Ref = (Var*)alloca(sizeof(Var)); new(arg4Ref) Var(FindType(decltype(arg4)), &arg4); args.push_back(arg4Ref); Var* arg5Ref = (Var*)alloca(sizeof(Var)); new(arg5Ref) Var(FindType(decltype(arg5)), &arg5); args.push_back(arg5Ref); Var* arg6Ref = (Var*)alloca(sizeof(Var)); new(arg6Ref) Var(FindType(decltype(arg6)), &arg6); args.push_back(arg6Ref); Var* arg7Ref = (Var*)alloca(sizeof(Var)); new(arg7Ref) Var(FindType(decltype(arg7)), &arg7); args.push_back(arg7Ref); Var* arg8Ref = (Var*)alloca(sizeof(Var)); new(arg8Ref) Var(FindType(decltype(arg8)), &arg8); args.push_back(arg8Ref); Var* arg9Ref = (Var*)alloca(sizeof(Var)); new(arg9Ref) Var(FindType(decltype(arg9)), &arg9); args.push_back(arg9Ref); Var* arg10Ref = (Var*)alloca(sizeof(Var))new(arg10Ref) Var(FindType(decltype(arg10)), &arg10); args.push_back(arg10Ref); Var* arg11Ref = (Var*)alloca(sizeof(Var))new(arg11Ref) Var(FindType(decltype(arg11)), &arg11); args.push_back(arg11Ref); Var* arg12Ref = (Var*)alloca(sizeof(Var))new(arg12Ref) Var(FindType(decltype(arg12)), &arg12); args.push_back(arg12Ref); Var* arg13Ref = (Var*)alloca(sizeof(Var))new(arg13Ref) Var(FindType(decltype(arg13)), &arg13); args.push_back(arg13Ref);                                                                                                                                                                                                                                                                                                             returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }
#define CONSTRUCT_15(name, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11, arg12, arg13, arg14)        { std::vector<Var*> args; Var* arg1Ref = (Var*)alloca(sizeof(Var)); new(arg1Ref) Var(FindType(decltype(arg1)), &arg1); args.push_back(arg1Ref); Var* arg2Ref = (Var*)alloca(sizeof(Var)); new(arg2Ref) Var(FindType(decltype(arg2)), &arg2); args.push_back(arg2Ref); Var* arg3Ref = (Var*)alloca(sizeof(Var)); new(arg3Ref) Var(FindType(decltype(arg3)), &arg3); args.push_back(arg3Ref); Var* arg4Ref = (Var*)alloca(sizeof(Var)); new(arg4Ref) Var(FindType(decltype(arg4)), &arg4); args.push_back(arg4Ref); Var* arg5Ref = (Var*)alloca(sizeof(Var)); new(arg5Ref) Var(FindType(decltype(arg5)), &arg5); args.push_back(arg5Ref); Var* arg6Ref = (Var*)alloca(sizeof(Var)); new(arg6Ref) Var(FindType(decltype(arg6)), &arg6); args.push_back(arg6Ref); Var* arg7Ref = (Var*)alloca(sizeof(Var)); new(arg7Ref) Var(FindType(decltype(arg7)), &arg7); args.push_back(arg7Ref); Var* arg8Ref = (Var*)alloca(sizeof(Var)); new(arg8Ref) Var(FindType(decltype(arg8)), &arg8); args.push_back(arg8Ref); Var* arg9Ref = (Var*)alloca(sizeof(Var)); new(arg9Ref) Var(FindType(decltype(arg9)), &arg9); args.push_back(arg9Ref); Var* arg10Ref = (Var*)alloca(sizeof(Var))new(arg10Ref) Var(FindType(decltype(arg10)), &arg10); args.push_back(arg10Ref); Var* arg11Ref = (Var*)alloca(sizeof(Var))new(arg11Ref) Var(FindType(decltype(arg11)), &arg11); args.push_back(arg11Ref); Var* arg12Ref = (Var*)alloca(sizeof(Var))new(arg12Ref) Var(FindType(decltype(arg12)), &arg12); args.push_back(arg12Ref); Var* arg13Ref = (Var*)alloca(sizeof(Var))new(arg13Ref) Var(FindType(decltype(arg13)), &arg13); args.push_back(arg13Ref); Var* arg14Ref = (Var*)alloca(sizeof(Var))new(arg14Ref) Var(FindType(decltype(arg14)), &arg14); args.push_back(arg14Ref);                                                                                                                                                       returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }
#define CONSTRUCT_16(name, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11, arg12, arg13, arg14, arg15) { std::vector<Var*> args; Var* arg1Ref = (Var*)alloca(sizeof(Var)); new(arg1Ref) Var(FindType(decltype(arg1)), &arg1); args.push_back(arg1Ref); Var* arg2Ref = (Var*)alloca(sizeof(Var)); new(arg2Ref) Var(FindType(decltype(arg2)), &arg2); args.push_back(arg2Ref); Var* arg3Ref = (Var*)alloca(sizeof(Var)); new(arg3Ref) Var(FindType(decltype(arg3)), &arg3); args.push_back(arg3Ref); Var* arg4Ref = (Var*)alloca(sizeof(Var)); new(arg4Ref) Var(FindType(decltype(arg4)), &arg4); args.push_back(arg4Ref); Var* arg5Ref = (Var*)alloca(sizeof(Var)); new(arg5Ref) Var(FindType(decltype(arg5)), &arg5); args.push_back(arg5Ref); Var* arg6Ref = (Var*)alloca(sizeof(Var)); new(arg6Ref) Var(FindType(decltype(arg6)), &arg6); args.push_back(arg6Ref); Var* arg7Ref = (Var*)alloca(sizeof(Var)); new(arg7Ref) Var(FindType(decltype(arg7)), &arg7); args.push_back(arg7Ref); Var* arg8Ref = (Var*)alloca(sizeof(Var)); new(arg8Ref) Var(FindType(decltype(arg8)), &arg8); args.push_back(arg8Ref); Var* arg9Ref = (Var*)alloca(sizeof(Var)); new(arg9Ref) Var(FindType(decltype(arg9)), &arg9); args.push_back(arg9Ref); Var* arg10Ref = (Var*)alloca(sizeof(Var))new(arg10Ref) Var(FindType(decltype(arg10)), &arg10); args.push_back(arg10Ref); Var* arg11Ref = (Var*)alloca(sizeof(Var))new(arg11Ref) Var(FindType(decltype(arg11)), &arg11); args.push_back(arg11Ref); Var* arg12Ref = (Var*)alloca(sizeof(Var))new(arg12Ref) Var(FindType(decltype(arg12)), &arg12); args.push_back(arg12Ref); Var* arg13Ref = (Var*)alloca(sizeof(Var))new(arg13Ref) Var(FindType(decltype(arg13)), &arg13); args.push_back(arg13Ref); Var* arg14Ref = (Var*)alloca(sizeof(Var))new(arg14Ref) Var(FindType(decltype(arg14)), &arg14); args.push_back(arg14Ref); Var* arg15Ref = (Var*)alloca(sizeof(Var))new(arg15Ref) Var(FindType(decltype(arg15)), &arg15); args.push_back(arg15Ref); returnValue.GetMetadata()->GetConstructors()[name](&returnValue, args); }

#define CONSTRUCT_(N) CONSTRUCT_##N
#define CONSTRUCT_EVAL(N) CONSTRUCT_(N)
#define CONSTRUCT(...) EXPAND(CONSTRUCT_EVAL(EXPAND(PP_NARG(__VA_ARGS__)))(__VA_ARGS__))

//all of this enables us to be able to use CALL_MEM_FUN for all member functions
//yeah. it's ugly.


#define CALL_GLBL_FUN_2(funName, returnValue)                                                                                                  META_ARGS.clear();                                                                                                                                                                                                                                                                                                                                                                                                                                           META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);
#define CALL_GLBL_FUN_3(funName, returnValue, arg1)                                                                                            META_ARGS.clear(); META_ARGS.push_back(&arg1);                                                                                                                                                                                                                                                                                                                                                                                                               META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);
#define CALL_GLBL_FUN_4(funName, returnValue, arg1, arg2)                                                                                      META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2);                                                                                                                                                                                                                                                                                                                                                                                   META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);
#define CALL_GLBL_FUN_5(funName, returnValue, arg1, arg2, arg3)                                                                                META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3);                                                                                                                                                                                                                                                                                                                                                       META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);
#define CALL_GLBL_FUN_6(funName, returnValue, arg1, arg2, arg3, arg4)                                                                          META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4);                                                                                                                                                                                                                                                                                                                           META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);
#define CALL_GLBL_FUN_7(funName, returnValue, arg1, arg2, arg3, arg4, arg5)                                                                    META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5);                                                                                                                                                                                                                                                                                               META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);
#define CALL_GLBL_FUN_8(funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6)                                                              META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6);                                                                                                                                                                                                                                                                   META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);
#define CALL_GLBL_FUN_9(funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7)                                                        META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7);                                                                                                                                                                                                                                       META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);
#define CALL_GLBL_FUN_10(funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8)                                                 META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8);                                                                                                                                                                                                           META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);
#define CALL_GLBL_FUN_11(funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9)                                           META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8); META_ARGS.push_back(&arg9);                                                                                                                                                                               META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);
#define CALL_GLBL_FUN_12(funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10)                                    META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8); META_ARGS.push_back(&arg9); META_ARGS.push_back(&arg10);                                                                                                                                                  META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);
#define CALL_GLBL_FUN_13(funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11)                             META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8); META_ARGS.push_back(&arg9); META_ARGS.push_back(&arg10); META_ARGS.push_back(&arg11);                                                                                                                     META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);
#define CALL_GLBL_FUN_14(funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11, arg12)                      META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8); META_ARGS.push_back(&arg9); META_ARGS.push_back(&arg10); META_ARGS.push_back(&arg11); META_ARGS.push_back(&arg12);                                                                                        META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);
#define CALL_GLBL_FUN_15(funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11, arg12, arg13)               META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8); META_ARGS.push_back(&arg9); META_ARGS.push_back(&arg10); META_ARGS.push_back(&arg11); META_ARGS.push_back(&arg12); META_ARGS.push_back(&arg13);                                                           META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);
#define CALL_GLBL_FUN_16(funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11, arg12, arg13, arg14)        META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8); META_ARGS.push_back(&arg9); META_ARGS.push_back(&arg10); META_ARGS.push_back(&arg11); META_ARGS.push_back(&arg12); META_ARGS.push_back(&arg13); META_ARGS.push_back(&arg14);                              META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);
#define CALL_GLBL_FUN_17(funName, returnValue, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11, arg12, arg13, arg14, arg15) META_ARGS.clear(); META_ARGS.push_back(&arg1); META_ARGS.push_back(&arg2); META_ARGS.push_back(&arg3); META_ARGS.push_back(&arg4); META_ARGS.push_back(&arg5); META_ARGS.push_back(&arg6); META_ARGS.push_back(&arg7); META_ARGS.push_back(&arg8); META_ARGS.push_back(&arg9); META_ARGS.push_back(&arg10); META_ARGS.push_back(&arg11); META_ARGS.push_back(&arg12); META_ARGS.push_back(&arg13); META_ARGS.push_back(&arg14); META_ARGS.push_back(&arg15); META(Marktopus::VoidType)->GetMethods()[funName](nullptr, &returnValue, META_ARGS);

#define CALL_GLBL_FUN_(N) CALL_GLBL_FUN_##N
#define CALL_GLBL_FUN_EVAL(N) CALL_GLBL_FUN_(N)
#define CALL_GLBL_FUN(...) EXPAND(CALL_GLBL_FUN_EVAL(EXPAND(PP_NARG(__VA_ARGS__)))(__VA_ARGS__))


#define REGISTER_CONSTRUCTOR_0( name )                                                                                                                                                            {__this* c = (__this*)alloca(sizeof(__this));                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c));                                                               }
#define REGISTER_CONSTRUCTOR_1( name, argType1)                                                                                                                                                   {__this* c = (__this*)alloca(sizeof(__this)); argType1*d = (argType1*)alloca(sizeof(argType1));                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c, *d));                                                           }
#define REGISTER_CONSTRUCTOR_2( name, argType1, argType2)                                                                                                                                         {__this* c = (__this*)alloca(sizeof(__this)); argType1*d = (argType1*)alloca(sizeof(argType1)); argType2*e = (argType2*)alloca(sizeof(argType2));                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c, *d, *e));                                                       }
#define REGISTER_CONSTRUCTOR_3( name, argType1, argType2, argType3)                                                                                                                               {__this* c = (__this*)alloca(sizeof(__this)); argType1*d = (argType1*)alloca(sizeof(argType1)); argType2*e = (argType2*)alloca(sizeof(argType2)); argType3* f = (argType3*)alloca(sizeof(argType3));                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c, *d, *e, *f));                                                  }
#define REGISTER_CONSTRUCTOR_4( name, argType1, argType2, argType3, argType4)                                                                                                                     {__this* c = (__this*)alloca(sizeof(__this)); argType1*d = (argType1*)alloca(sizeof(argType1)); argType2*e = (argType2*)alloca(sizeof(argType2)); argType3* f = (argType3*)alloca(sizeof(argType3)); argType4* g = (argType4*)alloca(sizeof(argType4));                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c, *d, *e, *f, *g));                                               }
#define REGISTER_CONSTRUCTOR_5( name, argType1, argType2, argType3, argType4, argType5)                                                                                                           {__this* c = (__this*)alloca(sizeof(__this)); argType1*d = (argType1*)alloca(sizeof(argType1)); argType2*e = (argType2*)alloca(sizeof(argType2)); argType3* f = (argType3*)alloca(sizeof(argType3)); argType4* g = (argType4*)alloca(sizeof(argType4)); argType5* h = (argType5*)alloca(sizeof(argType5));                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c, *d, *e, *f, *g, *h));                                           }
#define REGISTER_CONSTRUCTOR_6( name, argType1, argType2, argType3, argType4, argType5, argType6)                                                                                                 {__this* c = (__this*)alloca(sizeof(__this)); argType1*d = (argType1*)alloca(sizeof(argType1)); argType2*e = (argType2*)alloca(sizeof(argType2)); argType3* f = (argType3*)alloca(sizeof(argType3)); argType4* g = (argType4*)alloca(sizeof(argType4)); argType5* h = (argType5*)alloca(sizeof(argType5)); argType6* i = (argType6*)alloca(sizeof(argType6));                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c, *d, *e, *f, *g, *h, *i));                                       }
#define REGISTER_CONSTRUCTOR_7( name, argType1, argType2, argType3, argType4, argType5, argType6, argType7)                                                                                       {__this* c = (__this*)alloca(sizeof(__this)); argType1*d = (argType1*)alloca(sizeof(argType1)); argType2*e = (argType2*)alloca(sizeof(argType2)); argType3* f = (argType3*)alloca(sizeof(argType3)); argType4* g = (argType4*)alloca(sizeof(argType4)); argType5* h = (argType5*)alloca(sizeof(argType5)); argType6* i = (argType6*)alloca(sizeof(argType6)); argType7* j = (argType7*)alloca(sizeof(argType7));                                                                                                                                                                                                                                                                                                                                                                                                                                           MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c, *d, *e, *f, *g, *h, *i, *j));                                   }
#define REGISTER_CONSTRUCTOR_8( name, argType1, argType2, argType3, argType4, argType5, argType6, argType7, argType8)                                                                             {__this* c = (__this*)alloca(sizeof(__this)); argType1*d = (argType1*)alloca(sizeof(argType1)); argType2*e = (argType2*)alloca(sizeof(argType2)); argType3* f = (argType3*)alloca(sizeof(argType3)); argType4* g = (argType4*)alloca(sizeof(argType4)); argType5* h = (argType5*)alloca(sizeof(argType5)); argType6* i = (argType6*)alloca(sizeof(argType6)); argType7* j = (argType7*)alloca(sizeof(argType7)); argType8* k = (argType8*)alloca(sizeof(argType8));                                                                                                                                                                                                                                                                                                                                                                                        MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c, *d, *e, *f, *g, *h, *i, *j, *k));                               }
#define REGISTER_CONSTRUCTOR_9( name, argType1, argType2, argType3, argType4, argType5, argType6, argType7, argType8, argType9)                                                                   {__this* c = (__this*)alloca(sizeof(__this)); argType1*d = (argType1*)alloca(sizeof(argType1)); argType2*e = (argType2*)alloca(sizeof(argType2)); argType3* f = (argType3*)alloca(sizeof(argType3)); argType4* g = (argType4*)alloca(sizeof(argType4)); argType5* h = (argType5*)alloca(sizeof(argType5)); argType6* i = (argType6*)alloca(sizeof(argType6)); argType7* j = (argType7*)alloca(sizeof(argType7)); argType8* k = (argType8*)alloca(sizeof(argType8)); argType9* l = (argType9*)alloca(sizeof(argType9));                                                                                                                                                                                                                                                                                                                                     MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c, *d, *e, *f, *g, *h, *i, *j, *k, *l));                           }
#define REGISTER_CONSTRUCTOR_10(name, argType1, argType2, argType3, argType4, argType5, argType6, argType7, argType8, argType9, argType10)                                                        {__this* c = (__this*)alloca(sizeof(__this)); argType1*d = (argType1*)alloca(sizeof(argType1)); argType2*e = (argType2*)alloca(sizeof(argType2)); argType3* f = (argType3*)alloca(sizeof(argType3)); argType4* g = (argType4*)alloca(sizeof(argType4)); argType5* h = (argType5*)alloca(sizeof(argType5)); argType6* i = (argType6*)alloca(sizeof(argType6)); argType7* j = (argType7*)alloca(sizeof(argType7)); argType8* k = (argType8*)alloca(sizeof(argType8)); argType9* l = (argType9*)alloca(sizeof(argType9)); argType10* m = (argType10*)alloca(sizeof(argType10));                                                                                                                                                                                                                                                                               MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c, *d, *e, *f, *g, *h, *i, *j, *k, *l, *m));                       }
#define REGISTER_CONSTRUCTOR_11(name, argType1, argType2, argType3, argType4, argType5, argType6, argType7, argType8, argType9, argType10, argType11)                                             {__this* c = (__this*)alloca(sizeof(__this)); argType1*d = (argType1*)alloca(sizeof(argType1)); argType2*e = (argType2*)alloca(sizeof(argType2)); argType3* f = (argType3*)alloca(sizeof(argType3)); argType4* g = (argType4*)alloca(sizeof(argType4)); argType5* h = (argType5*)alloca(sizeof(argType5)); argType6* i = (argType6*)alloca(sizeof(argType6)); argType7* j = (argType7*)alloca(sizeof(argType7)); argType8* k = (argType8*)alloca(sizeof(argType8)); argType9* l = (argType9*)alloca(sizeof(argType9)); argType10* m = (argType10*)alloca(sizeof(argType10)); argType11* n = (argType11*)alloca(sizeof(argType11));                                                                                                                                                                                                                         MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c, *d, *e, *f, *g, *h, *i, *j, *k, *l, *m, *n));                   }
#define REGISTER_CONSTRUCTOR_12(name, argType1, argType2, argType3, argType4, argType5, argType6, argType7, argType8, argType9, argType10, argType11, argType12)                                  {__this* c = (__this*)alloca(sizeof(__this)); argType1*d = (argType1*)alloca(sizeof(argType1)); argType2*e = (argType2*)alloca(sizeof(argType2)); argType3* f = (argType3*)alloca(sizeof(argType3)); argType4* g = (argType4*)alloca(sizeof(argType4)); argType5* h = (argType5*)alloca(sizeof(argType5)); argType6* i = (argType6*)alloca(sizeof(argType6)); argType7* j = (argType7*)alloca(sizeof(argType7)); argType8* k = (argType8*)alloca(sizeof(argType8)); argType9* l = (argType9*)alloca(sizeof(argType9)); argType10* m = (argType10*)alloca(sizeof(argType10)); argType11* n = (argType11*)alloca(sizeof(argType11)); argType12* o = (argType12*)alloca(sizeof(argType12));                                                                                                                                                                   MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c, *d, *e, *f, *g, *h, *i, *j, *k, *l, *m, *n, *o));               }
#define REGISTER_CONSTRUCTOR_13(name, argType1, argType2, argType3, argType4, argType5, argType6, argType7, argType8, argType9, argType10, argType11, argType12, argType13)                       {__this* c = (__this*)alloca(sizeof(__this)); argType1*d = (argType1*)alloca(sizeof(argType1)); argType2*e = (argType2*)alloca(sizeof(argType2)); argType3* f = (argType3*)alloca(sizeof(argType3)); argType4* g = (argType4*)alloca(sizeof(argType4)); argType5* h = (argType5*)alloca(sizeof(argType5)); argType6* i = (argType6*)alloca(sizeof(argType6)); argType7* j = (argType7*)alloca(sizeof(argType7)); argType8* k = (argType8*)alloca(sizeof(argType8)); argType9* l = (argType9*)alloca(sizeof(argType9)); argType10* m = (argType10*)alloca(sizeof(argType10)); argType11* n = (argType11*)alloca(sizeof(argType11)); argType12* o = (argType12*)alloca(sizeof(argType12)); argType13* p = (argType13*)alloca(sizeof(argType13));                                                                                                             MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c, *d, *e, *f, *g, *h, *i, *j, *k, *l, *m, *n, *o, *p));           }
#define REGISTER_CONSTRUCTOR_14(name, argType1, argType2, argType3, argType4, argType5, argType6, argType7, argType8, argType9, argType10, argType11, argType12, argType13, argType14)            {__this* c = (__this*)alloca(sizeof(__this)); argType1*d = (argType1*)alloca(sizeof(argType1)); argType2*e = (argType2*)alloca(sizeof(argType2)); argType3* f = (argType3*)alloca(sizeof(argType3)); argType4* g = (argType4*)alloca(sizeof(argType4)); argType5* h = (argType5*)alloca(sizeof(argType5)); argType6* i = (argType6*)alloca(sizeof(argType6)); argType7* j = (argType7*)alloca(sizeof(argType7)); argType8* k = (argType8*)alloca(sizeof(argType8)); argType9* l = (argType9*)alloca(sizeof(argType9)); argType10* m = (argType10*)alloca(sizeof(argType10)); argType11* n = (argType11*)alloca(sizeof(argType11)); argType12* o = (argType12*)alloca(sizeof(argType12)); argType13* p = (argType13*)alloca(sizeof(argType13)); argType14* q = (argType14*)alloca(sizeof(argType14));                                                       MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c, *d, *e, *f, *g, *h, *i, *j, *k, *l, *m, *n, *o, *p, *q));       }
#define REGISTER_CONSTRUCTOR_15(name, argType1, argType2, argType3, argType4, argType5, argType6, argType7, argType8, argType9, argType10, argType11, argType12, argType13, argType14, argType15) {__this* c = (__this*)alloca(sizeof(__this)); argType1*d = (argType1*)alloca(sizeof(argType1)); argType2*e = (argType2*)alloca(sizeof(argType2)); argType3* f = (argType3*)alloca(sizeof(argType3)); argType4* g = (argType4*)alloca(sizeof(argType4)); argType5* h = (argType5*)alloca(sizeof(argType5)); argType6* i = (argType6*)alloca(sizeof(argType6)); argType7* j = (argType7*)alloca(sizeof(argType7)); argType8* k = (argType8*)alloca(sizeof(argType8)); argType9* l = (argType9*)alloca(sizeof(argType9)); argType10* m = (argType10*)alloca(sizeof(argType10)); argType11* n = (argType11*)alloca(sizeof(argType11)); argType12* o = (argType12*)alloca(sizeof(argType12)); argType13* p = (argType13*)alloca(sizeof(argType13)); argType14* q = (argType14*)alloca(sizeof(argType14)); argType15* r = (argType15*)alloca(sizeof(argType15)); MetaSingleton<__this>::Get()->AddConstructor(name, Constructor(*c, *d, *e, *f, *g, *h, *i, *j, *k, *l, *m, *n, *o, *p, *q, *r));   }

#define REGISTER_CONSTRUCTOR_(N) REGISTER_CONSTRUCTOR_##N
#define REGISTER_CONSTRUCTOR_EVAL(N) REGISTER_CONSTRUCTOR_(N)
#define RegisterConstructor(...) EXPAND(REGISTER_CONSTRUCTOR_EVAL(EXPAND(PP_NARG(__VA_ARGS__)))(__VA_ARGS__))





#define RegisterType_1( Namespace, metatype )                                                \
  Metadata MetaSingleton<Namespace::metatype>::metadata_( #metatype,                      \
                                                          #Namespace,                     \
                                                          sizeof(Namespace::metatype));   \
  MetaSingleton<Namespace::metatype> Namespace##metatype##MetaSingleton;                  \
  template <>                                                                             \
  void MetaSingleton<Namespace::metatype>::RegisterTypeData(void)                         \
  {                                                                                       \
    Namespace::metatype::RegisterTypeData();                                              \
  }                                                                                       \
  Metadata* Namespace::metatype::GetMetatype()                                            \
  {                                                                                       \
    return FindType(Namespace::metatype);                                                 \
  }                                                                                       \
  void Namespace::metatype::RegisterTypeData(void)                                        \
  {                                                                                       \
    typedef Namespace::metatype __this;
/**/
#define RegisterType_2( Namespace, metatype, valuetype )                                     \
  Metadata MetaSingleton<Namespace::metatype>::metadata_( #metatype,                      \
                                                          #Namespace,                     \
                                                          sizeof(Namespace::metatype),    \
                                                          valuetype );                    \
  MetaSingleton<Namespace::metatype> Namespace##metatype##MetaSingleton;                  \
  template <>                                                                             \
  void MetaSingleton<Namespace::metatype>::RegisterTypeData(void)                         \
  {                                                                                       \
    Namespace::metatype::RegisterTypeData();                                              \
  }                                                                                       \
  Metadata* Namespace::metatype::GetMetatype()                                            \
  {                                                                                       \
    return FindType(Namespace::metatype);                                                 \
  }                                                                                       \
  void Namespace::metatype::RegisterTypeData(void)                                        \
  {                                                                                       \
    typedef Namespace::metatype __this;

#define RegisterType_(N) RegisterType_##N
#define RegisterType_EVAL(N) RegisterType_(N)
#define RegisterType(...) EXPAND(RegisterType_EVAL(EXPAND(PP_NARG(__VA_ARGS__)))(__VA_ARGS__))






#define SET_VALUE(objectToSet,                                              \
                  MetaData,                                                 \
                  valueString)                                              \
{                                                                           \
  char* genericObj = (reinterpret_cast<char*>(objectToSet));                \
  if(MetaData->GetName() == "bool")                                         \
  {                                                                         \
    bool* value = reinterpret_cast<bool*>(genericObj);                      \
    if(valueString == "true")                                               \
    {                                                                       \
      *value = true;                                                        \
    }                                                                       \
    else                                                                    \
    {                                                                       \
      *value = false;                                                       \
    }                                                                       \
  }                                                                         \
  else if(MetaData->GetName() == "char")                                    \
  {                                                                         \
    char* value = reinterpret_cast<char*>(genericObj);                      \
    *value = valueString[0];                                                \
  }                                                                         \
  else if(MetaData->GetName() == "short")                                   \
  {                                                                         \
    short* value = reinterpret_cast<short*>(genericObj);                    \
    *value = static_cast<short>(std::stoi(valueString.c_str()));            \
  }                                                                         \
  else if(MetaData->GetName() == "int")                                     \
  {                                                                         \
    int* value = reinterpret_cast<int*>(genericObj);                        \
    *value = std::stoi(valueString.c_str());                                \
  }                                                                         \
  else if(MetaData->GetName() == "long")                                    \
  {                                                                         \
    long* value = reinterpret_cast<long*>(genericObj);                      \
    *value = std::stol(valueString.c_str());                                \
  }                                                                         \
  else if(MetaData->GetName() == "long long")                               \
  {                                                                         \
    long long* value = reinterpret_cast<long long*>(genericObj);            \
    *value = std::stoll(valueString.c_str());                               \
  }                                                                         \
  else if(MetaData->GetName() == "float")                                   \
  {                                                                         \
    float* value = reinterpret_cast<float*>(genericObj);                    \
    *value = std::stof(valueString.c_str());                                \
  }                                                                         \
  else if(MetaData->GetName() == "double")                                  \
  {                                                                         \
    double* value = reinterpret_cast<double*>(genericObj);                  \
    *value = std::stod(valueString.c_str());                                \
  }                                                                         \
  else if(MetaData->GetName() == "long double")                             \
  {                                                                         \
    long double* value = reinterpret_cast<long double*>(genericObj);        \
    *value = std::stold(valueString.c_str());                               \
  }                                                                         \
  else if(MetaData->GetName() == "unsigned")                                \
  {                                                                         \
    unsigned* value = reinterpret_cast<unsigned*>(genericObj);              \
    *value = static_cast<unsigned>(std::stol(valueString.c_str()));         \
  }                                                                         \
  else if(MetaData->GetName() == "unsigned long")                           \
  {                                                                         \
    unsigned long* value = reinterpret_cast<unsigned long*>(genericObj);    \
    *value = std::stoul(valueString.c_str());                               \
  }                                                                         \
  else if(MetaData->GetName() == "unsigned short")                          \
  {                                                                         \
    unsigned short* value = reinterpret_cast<unsigned short*>(genericObj);  \
    *value = std::stoi(valueString.c_str());                                \
  }                                                                         \
  else if(MetaData->GetName() == "unsigned char")                           \
  {                                                                         \
    unsigned char* value = reinterpret_cast<unsigned char*>(genericObj);    \
    *value = valueString[0];                                                \
  }                                                                         \
}
//  else if(MetaData->GetName() == "string")                                  \
//  {                                                                         \
//    std::string* value = reinterpret_cast<std::string*>(genericObj);                  \
//    value->assign(valueString);                                             \
//  }                                                                         \
//}


#endif
